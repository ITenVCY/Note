### new为什么要和delete搭配使用

1. new 一个对象实际上分为三步

   ![1566614199787](C:\Users\yx\Desktop\笔记\1566614199787.png)

   > 没有分解的new叫表达式, 不可重载, 而分解里面的叫操作符new, 可以重载, 同理delete

2. delete 一个对象分为两步

![1566614269668](C:\Users\yx\Desktop\笔记\1566614269668.png)

3. new申请空间的内部实现

![1566615036581](C:\Users\yx\Desktop\笔记\1566615036581.png)

   - 红色代表在内存中的起始空间和所占空间大小
  	- 灰色代表debug下所需要的空间
  	- 绿色代表申请空间所占的大小
  	- 翠绿色代表填充的字节数(16位基准)

> delete释放空间为什么要加[]符号

因为在释放的时候如果不加会造成内存泄漏, 但不是我们理解的整块空间全部内存泄露, 而是部分空间内存泄露, 例如第二个String我们申请了4个String所占的内存空间, 如果调用的是delete String; 并没有加[]的情况下, 释放的空间仅仅为第一个String所占用的空间被释放, 而其余几个String所占空间并没有被释放.

![1566615558818](C:\Users\yx\Desktop\笔记\1566615558818.png)

加上[]实际上是告诉编译器下方是有多个空间需要释放









##### 重载操作符new和delete, new[],delete[]

```c++
//他们不能声明在同一个namespace内
void* 

inline void* operator new(size_t size)
{
    
}
```



